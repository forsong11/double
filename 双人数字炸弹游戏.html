<!DOCTYPE html>
<html>
<head>
    <title>åŒäººæ•°å­—ç‚¸å¼¹æ¸¸æˆ</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px; }
        button { padding: 10px 15px; background: #4CAF50; color: white; border: none; cursor: pointer; }
        input { padding: 8px; width: 100px; }
        .log { margin-top: 20px; padding: 10px; background: #f5f5f5; }
    </style>
</head>
<body>
    <h1>åŒäººæ•°å­—ç‚¸å¼¹æ¸¸æˆ</h1>
    <div id="setup">
        <p>ç©å®¶1: <input type="text" id="player1" placeholder="æ˜µç§°"></p>
        <p>ç©å®¶2: <input type="text" id="player2" placeholder="æ˜µç§°"></p>
        <p>æ•°å­—ä¸Šé™: <input type="number" id="maxNum" value="100" min="10"></p>
        <button id="startBtn">å¼€å§‹æ¸¸æˆ</button>
    </div>
    
    <div id="game" style="display: none;">
        <h2 id="currentRound"></h2>
        <div id="currentRange"></div>
        <div id="guessedNums"></div>
        <div>
            <input type="number" id="guessInput">
            <button id="guessBtn">ç¡®è®¤</button>
        </div>
        <div class="log" id="gameLog"></div>
    </div>

    <script>
        let bomb, currentPlayer, low, high, guessedNumbers = [];
        const player1 = document.getElementById('player1');
        const player2 = document.getElementById('player2');
        const maxNum = document.getElementById('maxNum');
        const startBtn = document.getElementById('startBtn');
        const gameDiv = document.getElementById('game');
        const setupDiv = document.getElementById('setup');
        const currentRange = document.getElementById('currentRange');
        const guessedNums = document.getElementById('guessedNums');
        const gameLog = document.getElementById('gameLog');
        const guessInput = document.getElementById('guessInput');
        const guessBtn = document.getElementById('guessBtn');
        const currentRound = document.getElementById('currentRound');

        startBtn.addEventListener('click', startGame);
        guessBtn.addEventListener('click', makeGuess);

        function startGame() {
            if(!player1.value || !player2.value) {
                alert('è¯·è¾“å…¥ä¸¤ä½ç©å®¶çš„æ˜µç§°ï¼');
                return;
            }
            
            low = 1;
            high = parseInt(maxNum.value);
            bomb = Math.floor(Math.random() * high) + 1;
            guessedNumbers = [];
            currentPlayer = Math.random() > 0.5 ? player1.value : player2.value;
            
            setupDiv.style.display = 'none';
            gameDiv.style.display = 'block';
            
            updateUI();
            logMessage(`æ¸¸æˆå¼€å§‹ï¼ç‚¸å¼¹æ•°å­—åœ¨ ${low} åˆ° ${high} ä¹‹é—´ã€‚${currentPlayer}å…ˆæ‰‹ã€‚`);
        }

        function makeGuess() {
            const guess = parseInt(guessInput.value);
            
            if(isNaN(guess) || guess < low || guess > high) {
                alert(`è¯·è¾“å…¥${low}åˆ°${high}ä¹‹é—´çš„æœ‰æ•ˆæ•°å­—ï¼`);
                return;
            }
            
            if(guessedNumbers.includes(guess)) {
                alert(`æ•°å­—${guess}å·²ç»çŒœè¿‡äº†ï¼`);
                return;
            }
            
            guessedNumbers.push(guess);
            logMessage(`${currentPlayer} çŒœæµ‹: ${guess}`);
            
            if(guess === bomb) {
                logMessage(`ğŸ’¥ BOOMï¼${currentPlayer} çŒœä¸­äº†ç‚¸å¼¹æ•°å­— ${bomb}ï¼`);
                logMessage(`${currentPlayer} è¾“äº†ï¼`);
                
                const winner = currentPlayer === player1.value ? player2.value : player1.value;
                logMessage(`${winner} èµ¢å¾—äº†èƒœåˆ©ï¼ğŸ‰`);
                
                guessBtn.disabled = true;
            } else {
                if(guess < bomb) {
                    low = guess + 1;
                    logMessage(`ç‚¸å¼¹æ•°å­—æ¯” ${guess} å¤§ï¼`);
                } else {
                    high = guess - 1;
                    logMessage(`ç‚¸å¼¹æ•°å­—æ¯” ${guess} å°ï¼`);
                }
                
                currentPlayer = currentPlayer === player1.value ? player2.value : player1.value;
                guessInput.value = '';
                updateUI();
            }
        }

        function updateUI() {
            currentRound.textContent = `è½®åˆ° ${currentPlayer}`;
            currentRange.textContent = `å½“å‰èŒƒå›´: ${low} ~ ${high}`;
            guessedNums.textContent = guessedNumbers.length > 0 
                ? `å·²çŒœæ•°å­—: ${guessedNumbers.join(', ')}` 
                : 'è¿˜æœªçŒœè¿‡æ•°å­—';
            guessInput.min = low;
            guessInput.max = high;
            guessInput.focus();
        }

        function logMessage(msg) {
            gameLog.innerHTML += msg + '<br>';
            gameLog.scrollTop = gameLog.scrollHeight;
        }
    </script>
</body>
</html>
